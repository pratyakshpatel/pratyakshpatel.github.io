<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pratyaksh Patel | Technical Blog</title>

  <!-- LaTeX.css -->
  <link rel="stylesheet" href="https://latex.vercel.app/style.css" />

  <!-- MathJax -->
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-69CER33QN8"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-69CER33QN8');
  </script>

  <style>
    body {
      font-size: 1.1rem;
      max-width: 720px;
      margin: 0 auto;
      padding: 2rem 1rem;
      background: #f9f9f9;
      color: #333;
    }

    h1 {
      font-size: 1.6rem;
      margin-bottom: 1rem;
      text-align: center;
    }

    h2 {
      font-size: 1.3rem;
      margin-top: 2rem;
      margin-bottom: 0.6rem;
    }

    a:hover {
      font-size: 1.05em;
    }

    p {
      margin-bottom: 1rem;
    }

    @media (max-width: 500px) {
      body {
        font-size: 1rem;
        padding: 1rem;
      }

      h1 {
        font-size: 1.4rem;
      }

      h2 {
        font-size: 1.15rem;
      }
    }
  </style>
</head>

<body>

<h1>The Predictability Problem in Football</h1>
<p>“..the ultimate game of our planet”, these were some of the words by the poet of football commentry – Peter Dury during the commencement of the 2022 FIFA World Cup. It really is a big game and like many I am a big fan. But, what does really make this game so popular? The answer can be rivalries, history, fans, the players, the clubs, but the rational answer to this is unpredictability. But it has been slowly losing that unpredictable nature and so its popularity. More so, we could quantify the predictability to know this. Let’s see if we really can?</p>

<p>In the realm of football, a striking parallel emerges with society's process of gentrification. As wealthier leagues ascend, a deterministic trend takes hold: superior teams clinch victories more frequently, subsequently amassing wealth, enabling them to recruit top-tier players from an increasingly global talent pool. This cycle fortifies their dominance, fostering predictability within the realm of professional football, particularly in the higher echelons of the sport. (shoutout to the oil-money clubs).</p>

<p>Anfield, the home of Liverpool Football Club, by far considered one of the most difficult stadiums to win at for any other team. The home advantage as they call it is quite significant. This can actually be mathematically expressed in terms of equations. We can determine the score gap between two teams in any match following the Nth encounter. With \((T - N)\) matches and their respective results and score gaps for both models, we proceed to employ logistic regression. This involves modelling the outcome (a categorical variable, \(y\)) based on the score differences. To maintain generality, we consistently compute the point differential as \(x = \text{home team score} - \text{away team score}\), and assign \(y = 1/0\) if the home/away team emerges victorious.</p>

<p>\[(1) \quad P(\text{win}) = \frac{1}{1 + e^{-\mu x + s}}\]</p>
<p>where \(\mu\) and \(s\) are model parameters obtained by ordinary least-squares methods.</p>

<p>In monetary terms, \(h\) represents the winnings for a home team victory, and \(a\) represents the winnings for an away team victory. An experienced gambler understands that, in reality, the total of the probabilities for all possible outcomes in any betting house's game does not equal 1.</p>

<p>\[(2) \quad P_{\text{home}} + P_{\text{away}} < 1\]</p>

<p>Here comes the Elo ranking system to our help. Before each match, we calculate the expected outcome for each team (\(E_i\)). This is a quasi-normal function based on the difference between the teams' current rankings (\(R_i\) and \(R_j\)).</p>
<p>\[(3) \quad E_i = \frac{1}{1 + 10^{(R_j - R_i)/400}}\]</p>

<p>Once the match concludes, the rankings are updated as:</p>
<p>\[(4) \quad R_i' = R_i + K(s_i - E_i)\]</p>

<p>In this context, \(s_i\) represents the binary outcome of the match between teams \(i\) and \(j\), while \(E_i\) is the expected outcome. \(K\) is a weight factor determining the impact of the result.</p>

<p>To measure predictive accuracy, we use the Brier score. On each of \(t\) occasions, an event can occur in one of \(r\) classes. Forecast probabilities \(f_{ij}\) are defined over these classes, and the Brier score is:</p>
<p>\[(5) \quad BS = \frac{1}{t} \sum_{i=1}^{t} \sum_{j=1}^{r} (f_{ij} - E_{ij})^2\]</p>

<p>Where \(E_{ij} = 1\) if the event occurred in class \(j\), else 0. For binary classification (home win vs not), this becomes:</p>
<p>\[(6) \quad BS = \frac{1}{N} \sum_{i=1}^{N} (f_i - o_i)^2\]</p>

<p>The lower the Brier score, the better the model's prediction performance.</p>

<p>I just want to let you know, if you made it till here of this article, you are either a probability and statistics enthusiast or a die hard football fan, both would be rare. We went through a lot of mathematical equations, trying to model the perfect prediction model for identifying the winning team, but, all this still might not be able to explain Leicester City’s 2016 Premier League win. Nothing can, I guess.</p>

<section class="references">
  <h2>References</h2>
  <ol>
    <li>Brier, G. W. (1950). "Verification of Forecasts Expressed in Terms of Probability." Monthly Weather Review.</li>
    <li>Elo, A. E. (1978). "The Rating of Chessplayers, Past and Present." Arco Pub.</li>
    <li>Wikipedia contributors. (2024). <a href="https://en.wikipedia.org/wiki/Logistic_regression" target="_blank">Logistic regression</a>. Wikipedia.</li>
    <li>Wikipedia contributors. (2024). <a href="https://en.wikipedia.org/wiki/Elo_rating_system" target="_blank">Elo rating system</a>. Wikipedia.</li>
    <li>Wikipedia contributors. (2024). <a href="https://en.wikipedia.org/wiki/Brier_score" target="_blank">Brier score</a>. Wikipedia.</li>
  </ol>
</section>

</body>
</html>
